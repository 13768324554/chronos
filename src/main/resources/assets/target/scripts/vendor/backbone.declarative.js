(function(e){var t;define(["backbone"],function(){return function(){(function(e){var t=e.Backbone,n=e._;if(!n){n=typeof require!="undefined"&&require("underscore");if(!n)throw new Error("Can't find underscore")}if(!t){t=typeof require!="undefined"&&require("backbone");if(!t)throw new Error("Can't find Backbone")}var r=t.View,i={model:{},collection:{}};t.View=r.extend({constructor:function(){r.apply(this,Array.prototype.slice.call(arguments)),this.bindModelEvents(),this.bindCollectionEvents()},_bindDeclarativeEvents:function(e,t){var r=i[e][this.cid]||(i[e][this.cid]={});for(var s in t){var o=t[s];n.isFunction(o)||(o=this[t[s]]);if(!o)throw new Error('Method "'+t[s]+'" does not exist');r[s]=o}this.listenTo(this[e],r)},_unbindDeclarativeEvents:function(e){var t=i[e][this.cid];if(!t)return;this.stopListening(this[e],t),delete i[e][this.cid]},bindModelEvents:function(e){if(!e&&!(e=n.result(this,"modelEvents")))return;if(!this.model)throw new Error("View model does not exist");this.unbindModelEvents(),this._bindDeclarativeEvents("model",e)},unbindModelEvents:function(){this._unbindDeclarativeEvents("model")},bindCollectionEvents:function(e){if(!e&&!(e=n.result(this,"collectionEvents")))return;if(!this.collection)throw new Error("View collection does not exist");this.unbindCollectionEvents(),this._bindDeclarativeEvents("collection",e)},unbindCollectionEvents:function(){this._unbindDeclarativeEvents("collection")}})})(this)}.call(e),t})})(this);