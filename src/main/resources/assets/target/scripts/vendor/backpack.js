define(["jquery","backbone","underscore"],function(e,t,n){var r,i,s;return r={Models:{}},i=t.Model.extend({defaults:{open:!1,lock:!1,backgroundColor:"rgba(0,0,0,0.9)"},setContent:function(e){this.set("content",e)},open:function(){this.set("open",!0)},close:function(){this.set("open",!1),this.trigger("close")},dismiss:function(){this.get("lock")||this.close()},lock:function(){this.set("lock",!0)},unlock:function(){this.set("lock",!1)},color:function(e){this.set("backgroundColor",e)}}),r.Models.Lightbox=i,console.log("underscore _",n,this,t,r),s=t.View.extend({template:n.template(["<div class='lightbox-inner'>","<div class='content'></div>","</div>"].join("")),className:"lightbox",events:{click:"dismiss","click .content":"noop","click [data-lightbox-close]":"close"},bindings:function(){this.model.on("change:open",this.toggle,this),this.model.on("change:content",this.updateContent,this),this.model.on("change:backgroundColor",this.updateColor,this)},initialize:function(){this.model=new r.Models.Lightbox,this.bindings(),this.toggle(),this.append(),this.options.content&&this.content(this.options.content)},render:function(){var e=this.template();return this.$el.html(e),this},content:function(e){return this.model.setContent(e),this},updateContent:function(){var e=this.model.get("content"),t=e.render().el;this.$content=this.$el.find(".content"),this.$content.html(t)},updateColor:function(){var e=this.model.get("backgroundColor");this.$el.css("background-color",e)},color:function(e){return this.model.color(e),this},append:function(){this.render(),e("body").append(this.$el)},toggle:function(){var e=this.model.get("open");this.$el.toggle(e)},lock:function(){return this.model.lock(),this},unlock:function(){return this.model.unlock(),this},open:function(e){return this.model.open(),this},close:function(e){return this.model.close(),this},dismiss:function(e){return this.model.dismiss(),this},noop:function(e){e.stopPropagation()},addClass:function(e){return this.$el.find(".content").addClass(e),this},removeClass:function(e){return this.$el.find(".content").removeClass(e),this}}),r.Lightbox=s,r});