define(["require","./normalize"],function(e,t){function i(e){if(typeof process!="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire)try{var t=require.nodeRequire("csso"),r=e.length;return e=t.justDoIt(e),n("Compressed CSS output to "+Math.round(e.length/r*100)+"%."),e}catch(i){return n('Compression module not installed. Use "npm install csso -g" to enable.'),e}return n("Compression not supported outside of nodejs environments."),e}function s(e){if(typeof process!="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var t=require.nodeRequire("fs"),n=t.readFileSync(e,"utf8");return n.indexOf("ï»¿")===0?n.substring(1):n}var n=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),i=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(n),"utf-8")),s,o;try{s=new java.lang.StringBuffer,o=i.readLine(),o&&o.length()&&o.charAt(0)===65279&&(o=o.substring(1)),s.append(o);while((o=i.readLine())!==null)s.append(r).append(o);return String(s.toString())}finally{i.close()}}function o(e,t){if(typeof process!="undefined"&&process.versions&&!!process.versions.node&&require.nodeRequire){var n=require.nodeRequire("fs");n.writeFileSync(e,t,"utf8")}else{var r=new java.lang.String(t),i=new java.io.BufferedWriter(new java.io.OutputStreamWriter(new java.io.FileOutputStream(e),"utf-8"));try{i.write(r,0,r.length()),i.flush()}finally{i.close()}}}function u(e){return e.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}var n=function(){};requirejs.tools&&requirejs.tools.useLib(function(e){e(["node/print"],function(e){n=e})});var r={},a,f=function(n,r){if(!a){var i=e.toUrl("base_url").split("/");i.pop(),a=i.join("/")+"/"}var o=n;o.substr(o.length-4,4)!=".css"&&!r&&(o+=".css"),o=e.toUrl(o);if(o.substr(0,7)=="http://"||o.substr(0,8)=="https://")return;var u=s(o);return u=t(u,o,a),r&&(u=r(u)),u},l;r.load=function(e,t,n,i){if(i.modules)for(var s=0;s<i.modules.length;s++)if(i.modules[s].layer===undefined){l=s;break}r.config=r.config||i,n()},r.normalize=function(e,t){return e.substr(e.length-4,4)==".css"&&(e=e.substr(0,e.length-4)),t(e)};var c=[];return r.write=function(e,t,n,r,i){if(t.substr(0,7)=="http://"||t.substr(0,8)=="https://")return;c.push(f(t+(r?"."+r:""),i)),n.asModule(e+"!"+t,"define(function(){})")},r.onLayerEnd=function(s,f,h){var p=!1;r.config.separateCSS&&(p=!0),typeof l=="number"&&r.config.modules[l].separateCSS!==undefined&&(p=r.config.modules[l].separateCSS),l=null;var d=c.join("");if(p){n("Writing CSS! file: "+f.name+"\n");var v=this.config.appDir?this.config.baseUrl+f.name+".css":r.config.out.replace(/\.js$/,".css"),m=i(t(d,a,v));o(v,m)}else{if(d=="")return;d=u(i(d));var g=e.toUrl("./normalize.js"),y=t.convertURIBase("normalize",g,a);s("(function(g) { \n  g._cssWritten = g._cssWritten || []; \n  if (g._cssWritten.indexOf('"+f.name+(h?"-":"")+"') != -1) return; \n"+"  g._cssWritten.push('"+f.name+(h?"-":"")+"');"+"  for (var c in requirejs.s.contexts) { requirejs.s.contexts[c].nextTick = function(f){f()} } \n"+"  require(['css', '"+y+"', 'require'], function(css, normalize, req) { \n"+"    var pathname = window.location.pathname.split('/'); \n"+"    pathname.pop(); \n"+"    pathname = pathname.join('/') + '/'; \n"+"    var baseParts = req.toUrl('base_url').split('/'); \n"+"    baseParts.pop(); \n"+"    var baseUrl = baseParts.join('/') + '/'; \n"+"    baseUrl = normalize.convertURIBase(baseUrl, pathname, '/'); \n"+"    if (baseUrl.substr(0, 1) != '/') \n"+"      baseUrl = '/' + baseUrl; \n"+"    css.inject(normalize('"+d+"', baseUrl, pathname)); \n"+"  }); \n"+"  for (var c in requirejs.s.contexts) { requirejs.s.contexts[c].nextTick = requirejs.nextTick; } \n"+"})(this);")}c=[]},r});